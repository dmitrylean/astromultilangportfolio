---
import Layout from "../layouts/Layout.astro";
import Header from "../components/Header.astro";
import About from "../components/About.astro";
import Skills from "../components/Skills.astro";
import translations from "../data/lang.json";

const t = translations["ru"]; // Корень = RU
---

<html lang="ru">
  <head>
    <meta charset="UTF-8" />
    <title>{t.meta.title}</title>
    <script is:inline>
      const savedLang = localStorage.getItem("lang");
      const path = location.pathname;
      if (!savedLang) {
        const browserLang = navigator.language.split("-")[0];

        if (browserLang === "en" && !path.startsWith("/en")) {
          localStorage.setItem("lang", "en");
          window.location.replace("/en/");
        } else {
          localStorage.setItem("lang", "ru");
        }
      }
    </script>
  </head>
  <body>
    <Layout title={t.meta.title} author={t.meta.author}>
      <Header menu={t.menu} />
      <About {...t.aboutData} />
      <Skills {...t.skillsData} />
    </Layout>
  </body>
</html>
